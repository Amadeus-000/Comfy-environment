{"id":"3e54c044-5bd6-4549-8638-d30dd861e23f","revision":0,"last_node_id":17,"last_link_id":24,"nodes":[{"id":17,"type":"01890563-0325-44b3-91d1-28b0093d6a93","pos":[2426.185903417043,1130.2184905743743],"size":[210,282],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":null},{"label":"Positive Prompt","localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"label":"Negative Prompt","localized_name":"text_1","name":"text_1","type":"STRING","widget":{"name":"text_1"},"link":null},{"name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"name":"image","type":"IMAGE","links":null}],"properties":{"proxyWidgets":[["-1","text"],["-1","text_1"],["-1","steps"],["-1","cfg"],["-1","sampler_name"],["-1","denoise"],["1","seed"],["13","filename_prefix"]],"cnr_id":"comfy-core","ver":"0.6.0","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["","",20,6,"dpmpp_3m_sde",0.4]}],"links":[],"groups":[],"definitions":{"subgraphs":[{"id":"01890563-0325-44b3-91d1-28b0093d6a93","version":1,"state":{"lastGroupId":1,"lastNodeId":16,"lastLinkId":28,"lastRerouteId":0},"revision":0,"config":{},"name":"FaceDetailer","inputNode":{"id":-10,"bounding":[1564.6689907724653,1136.2184905743743,134.810546875,180]},"outputNode":{"id":-20,"bounding":[3377.702816061621,1166.2184905743743,120,60]},"inputs":[{"id":"251267a7-0ce5-4e1b-9f3e-aa3ed6637add","name":"image","type":"IMAGE","linkIds":[17],"localized_name":"image","pos":[1679.4795376474653,1156.2184905743743]},{"id":"d548bd48-eeff-4bf0-8f92-a7a5a63e57af","name":"text","type":"STRING","linkIds":[23],"localized_name":"text","label":"Positive Prompt","pos":[1679.4795376474653,1176.2184905743743]},{"id":"6967386b-b04d-4ff7-9039-46de761eef99","name":"text_1","type":"STRING","linkIds":[24],"localized_name":"text_1","label":"Negative Prompt","pos":[1679.4795376474653,1196.2184905743743]},{"id":"5bf9581c-643e-4b3b-af0b-86b0efb2d4b3","name":"steps","type":"INT","linkIds":[25],"pos":[1679.4795376474653,1216.2184905743743]},{"id":"1edbb617-9296-4814-bf8d-19b262ee3b0d","name":"cfg","type":"FLOAT","linkIds":[26],"pos":[1679.4795376474653,1236.2184905743743]},{"id":"7d513068-5255-4ac7-b106-0da790abeaae","name":"sampler_name","type":"COMBO","linkIds":[27],"pos":[1679.4795376474653,1256.2184905743743]},{"id":"06affac7-41cc-4ba2-9cf8-94e4558bc6ab","name":"denoise","type":"FLOAT","linkIds":[28],"pos":[1679.4795376474653,1276.2184905743743]}],"outputs":[{"id":"eede35a4-7fe7-4572-94af-4ed3ad6a642d","name":"image","type":"IMAGE","linkIds":[22],"pos":[3397.702816061621,1186.2184905743743]}],"widgets":[],"nodes":[{"id":7,"type":"SAMLoader","pos":[2182.9311163482007,1612.9602783156633],"size":[270,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"device_mode","name":"device_mode","type":"COMBO","widget":{"name":"device_mode"},"link":null}],"outputs":[{"localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[6]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.28.1","Node name for S&R":"SAMLoader","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":6,"type":"UltralyticsDetectorProvider","pos":[2174.0178766543654,1449.0935514835014],"size":[279.0767578125,78],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[5]},{"localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[7]}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"1.3.5","Node name for S&R":"UltralyticsDetectorProvider","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":8,"type":"CheckpointLoaderSimple","pos":[2204.50203090822,1013.6040449927718],"size":[270,98],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[8]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[9,11,12]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.6.0","Node name for S&R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["waiNSFWIllustrious_v110.safetensors"]},{"id":11,"type":"CLIPTextEncode","pos":[1796.3494349439004,1134.3347849392867],"size":[370,160],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":11},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":23}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[18]}],"title":"Positive Prompt","properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"CLIPTextEncode","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":10,"type":"CLIPTextEncode","pos":[1782.3414596146433,1357.6876787246977],"size":[371.9207458496094,142.02947998046875],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":12},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":24}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[19]}],"title":"Negative Prompt","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{"text":true},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":1,"type":"FaceDetailer","pos":[2556.590050880315,739.4547828450627],"size":[400,960],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":17},{"localized_name":"model","name":"model","type":"MODEL","link":8},{"localized_name":"clip","name":"clip","type":"CLIP","link":9},{"localized_name":"vae","name":"vae","type":"VAE","link":10},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":18},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":19},{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":5},{"localized_name":"sam_model_opt","name":"sam_model_opt","shape":7,"type":"SAM_MODEL","link":6},{"localized_name":"segm_detector_opt","name":"segm_detector_opt","shape":7,"type":"SEGM_DETECTOR","link":7},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":null},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null},{"localized_name":"guide_size","name":"guide_size","type":"FLOAT","widget":{"name":"guide_size"},"link":null},{"localized_name":"guide_size_for","name":"guide_size_for","type":"BOOLEAN","widget":{"name":"guide_size_for"},"link":null},{"localized_name":"max_size","name":"max_size","type":"FLOAT","widget":{"name":"max_size"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":25},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":26},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":27},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":28},{"localized_name":"feather","name":"feather","type":"INT","widget":{"name":"feather"},"link":null},{"localized_name":"noise_mask","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"force_inpaint","name":"force_inpaint","type":"BOOLEAN","widget":{"name":"force_inpaint"},"link":null},{"localized_name":"bbox_threshold","name":"bbox_threshold","type":"FLOAT","widget":{"name":"bbox_threshold"},"link":null},{"localized_name":"bbox_dilation","name":"bbox_dilation","type":"INT","widget":{"name":"bbox_dilation"},"link":null},{"localized_name":"bbox_crop_factor","name":"bbox_crop_factor","type":"FLOAT","widget":{"name":"bbox_crop_factor"},"link":null},{"localized_name":"sam_detection_hint","name":"sam_detection_hint","type":"COMBO","widget":{"name":"sam_detection_hint"},"link":null},{"localized_name":"sam_dilation","name":"sam_dilation","type":"INT","widget":{"name":"sam_dilation"},"link":null},{"localized_name":"sam_threshold","name":"sam_threshold","type":"FLOAT","widget":{"name":"sam_threshold"},"link":null},{"localized_name":"sam_bbox_expansion","name":"sam_bbox_expansion","type":"INT","widget":{"name":"sam_bbox_expansion"},"link":null},{"localized_name":"sam_mask_hint_threshold","name":"sam_mask_hint_threshold","type":"FLOAT","widget":{"name":"sam_mask_hint_threshold"},"link":null},{"localized_name":"sam_mask_hint_use_negative","name":"sam_mask_hint_use_negative","type":"COMBO","widget":{"name":"sam_mask_hint_use_negative"},"link":null},{"localized_name":"drop_size","name":"drop_size","type":"INT","widget":{"name":"drop_size"},"link":null},{"localized_name":"wildcard","name":"wildcard","type":"STRING","widget":{"name":"wildcard"},"link":null},{"localized_name":"cycle","name":"cycle","type":"INT","widget":{"name":"cycle"},"link":null},{"localized_name":"inpaint_model","name":"inpaint_model","shape":7,"type":"BOOLEAN","widget":{"name":"inpaint_model"},"link":null},{"localized_name":"noise_mask_feather","name":"noise_mask_feather","shape":7,"type":"INT","widget":{"name":"noise_mask_feather"},"link":null},{"localized_name":"tiled_encode","name":"tiled_encode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_encode"},"link":null},{"localized_name":"tiled_decode","name":"tiled_decode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_decode"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[22]},{"localized_name":"cropped_refined","name":"cropped_refined","shape":6,"type":"IMAGE","links":null},{"localized_name":"cropped_enhanced_alpha","name":"cropped_enhanced_alpha","shape":6,"type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":null},{"localized_name":"cnet_images","name":"cnet_images","shape":6,"type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.28.1","Node name for S&R":"FaceDetailer","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":[512,true,1024,554912233149457,"randomize",20,6,"dpmpp_3m_sde","karras",0.4,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20,false,false]}],"groups":[{"id":1,"title":"FaceDetailer","bounding":[1744.6689907724653,662.982198303686,1573.0338252891556,1046.4725845413766],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":8,"origin_id":8,"origin_slot":0,"target_id":1,"target_slot":1,"type":"MODEL"},{"id":9,"origin_id":8,"origin_slot":1,"target_id":1,"target_slot":2,"type":"CLIP"},{"id":10,"origin_id":8,"origin_slot":2,"target_id":1,"target_slot":3,"type":"VAE"},{"id":18,"origin_id":11,"origin_slot":0,"target_id":1,"target_slot":4,"type":"CONDITIONING"},{"id":19,"origin_id":10,"origin_slot":0,"target_id":1,"target_slot":5,"type":"CONDITIONING"},{"id":5,"origin_id":6,"origin_slot":0,"target_id":1,"target_slot":6,"type":"BBOX_DETECTOR"},{"id":6,"origin_id":7,"origin_slot":0,"target_id":1,"target_slot":7,"type":"SAM_MODEL"},{"id":7,"origin_id":6,"origin_slot":1,"target_id":1,"target_slot":8,"type":"SEGM_DETECTOR"},{"id":11,"origin_id":8,"origin_slot":1,"target_id":11,"target_slot":0,"type":"CLIP"},{"id":12,"origin_id":8,"origin_slot":1,"target_id":10,"target_slot":0,"type":"CLIP"},{"id":17,"origin_id":-10,"origin_slot":0,"target_id":1,"target_slot":0,"type":"IMAGE"},{"id":22,"origin_id":1,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":23,"origin_id":-10,"origin_slot":1,"target_id":11,"target_slot":1,"type":"STRING"},{"id":24,"origin_id":-10,"origin_slot":2,"target_id":10,"target_slot":1,"type":"STRING"},{"id":25,"origin_id":-10,"origin_slot":3,"target_id":1,"target_slot":15,"type":"INT"},{"id":26,"origin_id":-10,"origin_slot":4,"target_id":1,"target_slot":16,"type":"FLOAT"},{"id":27,"origin_id":-10,"origin_slot":5,"target_id":1,"target_slot":17,"type":"COMBO"},{"id":28,"origin_id":-10,"origin_slot":6,"target_id":1,"target_slot":19,"type":"FLOAT"}],"extra":{"workflowRendererVersion":"LG","ue_links":[]}}]},"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[],"ds":{"scale":2.2575,"offset":[-2100.1781514790596,-1040.3403067427016]}},"version":0.4}